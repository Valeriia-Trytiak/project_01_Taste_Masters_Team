import{n as g,a as S,c as m,b as f,h as y}from"./cards-42d7ab43.js";const b=document.querySelector(".order-btn"),N=document.querySelector(".order-btn-mob"),A=document.querySelector(".modal-close-btn"),v=document.querySelector(".modal-overlay"),C=document.querySelector(".form");b.addEventListener("click",p);N.addEventListener("click",p);A.addEventListener("click",L);C.addEventListener("submit",E);function p(){v.classList.remove("visually-hidden")}function L(){v.classList.add("visually-hidden")}function E(e){e.preventDefault();const r=e.currentTarget.elements.modal_name.value,s=e.currentTarget.elements.modal_phone.value,c=e.currentTarget.elements.modal_email.value,l=e.currentTarget.elements.modal_comment.value;e.currentTarget.reset(),r==""||s==""||c==""?g.Notify.failure("Ensure you input a value in both fields!"):S(r,s,c,l).then(()=>{g.Notify.success("This form has been successfully submitted!"),L()}).catch(d=>{g.Notify.failure("Oops! Something went wrong. Please try again later.")})}function O(e){return e.map(({category:r})=>r).filter((r,s,c)=>c.indexOf(r)===s).sort((r,s)=>r.localeCompare(s)).map(r=>`<button type="button" class="fav-categories-btn">${r}</button>`).join("")}function q(){const e={hero:document.querySelector(".js-fav-hero-section"),categories:document.querySelector(".js-fav-categories-section"),allCategBtn:document.querySelector(".js-fav-all-categ-btn"),categoriesList:document.querySelector(".js-fav-categories-list"),cardsList:document.querySelector(".js-fav-cards-list"),plug:document.querySelector(".js-favorites-plug"),footer:document.querySelector(".js-fav-footer")};r();function r(){e.allCategBtn.removeEventListener("click",u),e.categoriesList.removeEventListener("click",d);const t=JSON.parse(localStorage.getItem("cardsArray"))||[];if(t.length===0){getComputedStyle(e.hero).getPropertyValue("--visible")==="false"&&(e.hero.style.display="none"),e.categories.style.display="none",e.cardsList.style.display="none",e.footer.style.display="none",e.plug.style.display="block";return}if(e.plug.style.display="none",e.categoriesList.innerHTML=O(t),e.cardsList.innerHTML=m(t),f(),y(e.cardsList,t),document.querySelectorAll(".js-btn-heart-active").forEach(n=>n.addEventListener("click",s)),t.map(({category:n})=>n).filter((n,i,h)=>h.indexOf(n)===i).length===1){e.allCategBtn.style.display="none",e.categoriesList.firstChild.classList.add("categ-btn-active");return}e.allCategBtn.addEventListener("click",u),e.categoriesList.addEventListener("click",d)}function s(t){const o=t.currentTarget.parentNode.parentNode.dataset.id,a=JSON.parse(localStorage.getItem("cardsArray"))||[];a.splice(a.indexOf(a.find(n=>n._id===o)),1),localStorage.setItem("cardsArray",JSON.stringify(a)),r()}function c(){const t=[...e.categoriesList.children].filter(i=>i.classList.contains("categ-btn-active")),a=(JSON.parse(localStorage.getItem("cardsArray"))||[]).filter(i=>i.category===t[0].textContent);if(a.length===0){u();return}e.cardsList.innerHTML=m(a),f(),y(e.cardsList,a),document.querySelectorAll(".js-btn-heart-active").forEach(i=>i.addEventListener("click",l))}function l(t){const o=t.currentTarget.parentNode.parentNode.dataset.id,a=JSON.parse(localStorage.getItem("cardsArray"))||[];a.splice(a.indexOf(a.find(n=>n._id===o)),1),localStorage.setItem("cardsArray",JSON.stringify(a)),c()}function d(t){t.target.classList.contains("js-fav-categories-list")||([...t.currentTarget.children].map(o=>o.classList.remove("categ-btn-active")),t.currentTarget.previousElementSibling.classList.remove("categ-btn-active"),t.target.classList.add("categ-btn-active"),c())}function u(){e.allCategBtn.classList.add("categ-btn-active"),[...e.allCategBtn.nextElementSibling.children].map(t=>t.classList.remove("categ-btn-active")),r()}}q();
